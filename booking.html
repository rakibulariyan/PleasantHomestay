<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Guest House Booking Form | Pleasant HomeStay</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="assets/css/style.css" />
    <style>
      /* Override styles for booking page */
      .page-hero {
        display: none; /* Hide the default page hero */
      }

      /* Booking page specific styles */
      .booking-container {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        color: #333;
        line-height: 1.6;
        padding: 100px 0 60px; /* Account for fixed header */
        min-height: 100vh;
      }

      .booking-wrapper {
        max-width: 900px;
        margin: 0 auto;
        background-color: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .booking-header {
        background: linear-gradient(to right, var(--primary), #4a6491);
        color: white;
        padding: 25px 30px;
        text-align: center;
      }

      .booking-header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
      }

      .booking-header p {
        font-size: 1.1rem;
        opacity: 0.9;
      }

      .form-container {
        padding: 30px;
      }

      .form-section {
        margin-bottom: 40px;
        padding-bottom: 25px;
        border-bottom: 1px solid #eaeaea;
      }

      .section-title {
        font-size: 1.5rem;
        color: var(--primary);
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid var(--secondary);
        display: flex;
        align-items: center;
      }

      .section-title i {
        margin-right: 10px;
        color: var(--secondary);
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-row {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
      }

      .form-row .form-group {
        flex: 1;
        min-width: 250px;
      }

      .booking-form label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--dark);
      }

      .required::after {
        content: " *";
        color: #e74c3c;
      }

      .booking-form input,
      .booking-form select,
      .booking-form textarea {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        transition: all 0.3s;
      }

      .booking-form input:focus,
      .booking-form select:focus,
      .booking-form textarea:focus {
        outline: none;
        border-color: var(--secondary);
        box-shadow: 0 0 0 3px rgba(182, 141, 64, 0.2);
      }

      .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-top: 10px;
      }

      .checkbox-item {
        display: flex;
        align-items: center;
      }

      .checkbox-item input {
        width: auto;
        margin-right: 8px;
      }

      .qr-container {
        text-align: center;
        padding: 20px;
        background-color: #f8f9fa;
        border-radius: 10px;
        margin-top: 15px;
        display: none;
      }

      .qr-code {
        width: 200px;
        height: 200px;
        margin: 15px auto;
        background-color: white;
        padding: 10px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .qr-code img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }

      .terms-container {
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        max-height: 200px;
        overflow-y: auto;
        margin-bottom: 20px;
      }

      .terms-container ul {
        padding-left: 20px;
      }

      .terms-container li {
        margin-bottom: 10px;
      }

      .btn-container {
        display: flex;
        justify-content: space-between;
        margin-top: 40px;
        gap: 20px;
      }

      .submit-btn,
      .reset-btn {
        flex: 1;
        padding: 16px;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .submit-btn {
        background: linear-gradient(to right, #27ae60, #2ecc71);
        color: white;
      }

      .submit-btn:hover {
        background: linear-gradient(to right, #229954, #27ae60);
        transform: translateY(-3px);
        box-shadow: 0 7px 15px rgba(39, 174, 96, 0.3);
      }

      .reset-btn {
        background-color: #e74c3c;
        color: white;
      }

      .reset-btn:hover {
        background-color: #c0392b;
        transform: translateY(-3px);
        box-shadow: 0 7px 15px rgba(231, 76, 60, 0.3);
      }

      .btn-container i {
        margin-right: 10px;
      }

      .error {
        color: #e74c3c;
        font-size: 0.9rem;
        margin-top: 5px;
        display: none;
      }

      .success-message {
        background-color: #d4edda;
        color: #155724;
        padding: 40px;
        border-radius: 10px;
        text-align: center;
        margin: 30px 0;
        display: none;
      }

      .notification {
        padding: 15px;
        margin: 20px 0;
        border-radius: 8px;
        display: none;
        text-align: center;
      }

      .notification.success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .notification.error {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: #fff;
        animation: spin 1s ease-in-out infinite;
        margin-right: 10px;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Responsive styles */
      @media (max-width: 992px) {
        .booking-wrapper {
          max-width: 95%;
          margin: 0 20px;
        }

        .booking-header h1 {
          font-size: 2rem;
        }
      }

      @media (max-width: 768px) {
        .booking-container {
          padding: 80px 0 40px;
        }

        .booking-header {
          padding: 20px;
        }

        .booking-header h1 {
          font-size: 1.8rem;
        }

        .form-container {
          padding: 20px;
        }

        .form-row {
          flex-direction: column;
          gap: 15px;
        }

        .form-row .form-group {
          min-width: 100%;
        }

        .btn-container {
          flex-direction: column;
        }

        .section-title {
          font-size: 1.3rem;
        }

        .checkbox-group {
          flex-direction: column;
          gap: 10px;
        }
      }

      @media (max-width: 576px) {
        .booking-container {
          padding: 70px 0 30px;
        }

        .booking-wrapper {
          margin: 0 10px;
          border-radius: 10px;
        }

        .booking-header h1 {
          font-size: 1.5rem;
        }

        .booking-header p {
          font-size: 0.9rem;
        }

        .form-container {
          padding: 15px;
        }

        .form-section {
          padding-bottom: 20px;
          margin-bottom: 30px;
        }

        .booking-form input,
        .booking-form select,
        .booking-form textarea {
          padding: 10px 12px;
          font-size: 15px;
        }

        .submit-btn,
        .reset-btn {
          padding: 14px;
          font-size: 16px;
        }

        .qr-code {
          width: 150px;
          height: 150px;
        }

        .success-message {
          padding: 30px 20px;
        }
      }

      @media (max-width: 400px) {
        .booking-header h1 {
          font-size: 1.3rem;
        }

        .section-title {
          font-size: 1.1rem;
        }

        .booking-form label {
          font-size: 0.9rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <div data-include="components/header.html"></div>

    <main class="booking-container">
      <div class="booking-wrapper">
        <header class="booking-header">
          <h1><i class="fas fa-hotel"></i> Guest House Booking Form</h1>
          <p>
            Please fill out all required fields (*) to complete your reservation
          </p>
        </header>

        <div class="form-container">
          <!-- FormSubmit Notification Area -->
          <div id="formsubmit-notification" class="notification"></div>

          <!-- IMPORTANT: Replace YOUR_EMAIL_HERE with your actual email -->
          <form
            id="bookingForm"
            class="booking-form"
            action="https://script.google.com/macros/s/AKfycbycnvx4IHvs1Qq3NrPHtJoOUhA36mmGbEOYTy8RJ1vWPNdYaX3P23DQD-nnGlB4OupW8A/exec"
            method="POST"
            target="_top"
          >
            <!-- Section 1: Guest Information -->
            <div class="form-section">
              <h2 class="section-title">
                <i class="fas fa-user-circle"></i> Guest Information
              </h2>

              <div class="form-row">
                <div class="form-group">
                  <label for="fullName" class="required"
                    >Full Name (as per ID)</label
                  >
                  <input type="text" id="fullName" name="fullName" required />
                  <div class="error" id="fullNameError">
                    Please enter your full name
                  </div>
                </div>

                <div class="form-group">
                  <label for="fatherName" class="required">Father's Name</label>
                  <input
                    type="text"
                    id="fatherName"
                    name="fatherName"
                    required
                  />
                  <div class="error" id="fatherNameError">
                    Please enter father's name
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="contactNumber" class="required"
                    >Contact Number</label
                  >
                  <input
                    type="tel"
                    id="contactNumber"
                    name="contactNumber"
                    pattern="[0-9]{10}"
                    required
                  />
                  <div class="error" id="contactError">
                    Please enter a valid 10-digit phone number
                  </div>
                </div>

                <div class="form-group">
                  <label for="emailAddress" class="required"
                    >Email Address</label
                  >
                  <input
                    type="email"
                    id="emailAddress"
                    name="emailAddress"
                    required
                  />
                  <div class="error" id="emailError">
                    Please enter a valid email address
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="address" class="required">Address</label>
                <textarea
                  id="address"
                  name="address"
                  rows="3"
                  required
                ></textarea>
                <div class="error" id="addressError">
                  Please enter your address
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="nationality" class="required">Nationality</label>
                  <input
                    type="text"
                    id="nationality"
                    name="nationality"
                    required
                  />
                  <div class="error" id="nationalityError">
                    Please enter your nationality
                  </div>
                </div>

                <div class="form-group">
                  <label for="idType" class="required">Type of ID</label>
                  <select id="idType" name="idType" required>
                    <option value="">Select ID Type</option>
                    <option value="passport">Passport</option>
                    <option value="driver">Driver's License</option>
                    <option value="aadhar">Aadhar Card</option>
                    <option value="other">Other</option>
                  </select>
                  <div class="error" id="idTypeError">
                    Please select ID type
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="idNumber" class="required">ID Card Number</label>
                  <input type="text" id="idNumber" name="idNumber" required />
                  <div class="error" id="idNumberError">
                    Please enter your ID number
                  </div>
                </div>

                <div class="form-group">
                  <label for="age" class="required">Age</label>
                  <input
                    type="number"
                    id="age"
                    name="age"
                    min="1"
                    max="120"
                    required
                  />
                  <div class="error" id="ageError">
                    Please enter a valid age
                  </div>
                </div>
              </div>
            </div>

            <!-- Section 2: Booking Details -->
            <div class="form-section">
              <h2 class="section-title">
                <i class="fas fa-calendar-alt"></i> Booking Details
              </h2>

              <div class="form-row">
                <div class="form-group">
                  <label for="checkin" class="required"
                    >Check-in Date & Time</label
                  >
                  <input
                    type="datetime-local"
                    id="checkin"
                    name="checkin"
                    required
                  />
                  <div class="error" id="checkinError">
                    Please select check-in date and time
                  </div>
                </div>

                <div class="form-group">
                  <label for="checkout" class="required"
                    >Check-out Date & Time</label
                  >
                  <input
                    type="datetime-local"
                    id="checkout"
                    name="checkout"
                    required
                  />
                  <div class="error" id="checkoutError">
                    Please select check-out date and time
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="adults" class="required">Number of Adults</label>
                  <input
                    type="number"
                    id="adults"
                    name="adults"
                    min="1"
                    max="20"
                    required
                  />
                  <div class="error" id="adultsError">
                    Please enter number of adults
                  </div>
                </div>

                <div class="form-group">
                  <label for="children">Number of Children (if any)</label>
                  <input
                    type="number"
                    id="children"
                    name="children"
                    min="0"
                    max="20"
                  />
                </div>
              </div>

              <div class="form-group">
                <label for="guestNames"
                  >Guest Names (Optional, comma separated)</label
                >
                <textarea
                  id="guestNames"
                  name="guestNames"
                  rows="3"
                  placeholder="Enter all guest names separated by commas"
                ></textarea>
              </div>

              <div class="form-group">
                <label for="rooms" class="required"
                  >Number of Rooms Required</label
                >
                <input
                  type="number"
                  id="rooms"
                  name="rooms"
                  min="1"
                  max="10"
                  required
                />
                <div class="error" id="roomsError">
                  Please enter number of rooms
                </div>
              </div>
            </div>

            <!-- Section 3: Room Preferences -->
            <div class="form-section">
              <h2 class="section-title">
                <i class="fas fa-bed"></i> Room Preferences
              </h2>

              <div class="form-group">
                <label for="roomType" class="required">Room Type</label>
                <select id="roomType" name="roomType" required>
                  <option value="">Select Room Type</option>
                  <option value="1bhk">1 BHK</option>
                  <option value="2bhk">2 BHK</option>
                  <option value="3bhk">3 BHK</option>
                  <option value="other">Other</option>
                </select>
                <div class="error" id="roomTypeError">
                  Please select room type
                </div>
              </div>

              <div
                class="form-group"
                id="otherRoomContainer"
                style="display: none"
              >
                <label for="otherRoom">Other Room Type</label>
                <input
                  type="text"
                  id="otherRoom"
                  name="otherRoom"
                  placeholder="Please specify"
                />
              </div>
            </div>

            <!-- Section 4: Additional Services -->
            <div class="form-section">
              <h2 class="section-title">
                <i class="fas fa-concierge-bell"></i> Additional Services
                (Optional)
              </h2>

              <div class="form-group">
                <label>Breakfast</label>
                <div class="checkbox-group">
                  <div class="checkbox-item">
                    <input
                      type="radio"
                      id="breakfastNone"
                      name="breakfast"
                      value="none"
                      checked
                    />
                    <label for="breakfastNone">No Breakfast</label>
                  </div>
                  <div class="checkbox-item">
                    <input
                      type="radio"
                      id="breakfastContinental"
                      name="breakfast"
                      value="continental"
                    />
                    <label for="breakfastContinental"
                      >Continental Breakfast</label
                    >
                  </div>
                  <div class="checkbox-item">
                    <input
                      type="radio"
                      id="breakfastFull"
                      name="breakfast"
                      value="full"
                    />
                    <label for="breakfastFull">Full Breakfast</label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Section 5: Payment Information -->
            <div class="form-section">
              <h2 class="section-title">
                <i class="fas fa-credit-card"></i> Payment Information
              </h2>

              <div class="form-group">
                <label class="required">Payment Method</label>
                <div class="checkbox-group">
                  <div class="checkbox-item">
                    <input
                      type="radio"
                      id="paymentBank"
                      name="payment"
                      value="bank"
                      required
                    />
                    <label for="paymentBank">Bank Transfer</label>
                  </div>
                  <div class="checkbox-item">
                    <input
                      type="radio"
                      id="paymentCash"
                      name="payment"
                      value="cash"
                      required
                    />
                    <label for="paymentCash">Cash on Arrival</label>
                  </div>
                  <div class="checkbox-item">
                    <input
                      type="radio"
                      id="paymentUPI"
                      name="payment"
                      value="upi"
                      required
                    />
                    <label for="paymentUPI">UPI Payment</label>
                  </div>
                </div>
                <div class="error" id="paymentError">
                  Please select a payment method
                </div>
              </div>

              <div class="qr-container" id="qrContainer">
                <h3><i class="fas fa-qrcode"></i> Scan QR Code to Pay</h3>
                <p>
                  Please scan the QR code below using any UPI app to complete
                  your payment
                </p>
                <div class="qr-code">
                  <!-- Replace this with your actual QR code image -->
                  <img
                    src="assets/images/qr/upi-qr.jpg"
                    alt="QR Code for UPI Payment"
                  />
                </div>
                <p>
                  After payment, please save the transaction ID for reference
                </p>
              </div>
            </div>

            <div class="form-group" id="txnContainer" style="display: none">
              <label for="transactionId" class="required"
                >UPI Transaction ID</label
              >
              <input type="text" id="transactionId" name="transactionId" />
            </div>

            <!-- Section 6: Terms & Conditions -->
            <div class="form-section">
              <h2 class="section-title">
                <i class="fas fa-file-contract"></i> Terms & Conditions
              </h2>

              <div class="terms-container">
                <p>
                  Please read and acknowledge the following terms and
                  conditions:
                </p>
                <ul>
                  <li>
                    I agree to the cancellation policy (full refund 7+ days
                    before, 50% refund 3-7 days before, no refund &lt;3 days
                    before)
                  </li>
                  <li>
                    I understand check-in is from 2 PM and check-out by 11 AM
                  </li>
                  <li>I agree to provide valid ID upon arrival</li>
                  <li>
                    I accept responsibility for any damages caused during my
                    stay
                  </li>
                  <li>
                    I agree to the guest house's quiet hours (10 PM to 7 AM)
                  </li>
                </ul>
              </div>

              <div class="form-group">
                <div class="checkbox-item">
                  <input
                    type="checkbox"
                    id="termsAgree"
                    name="termsAgree"
                    required
                  />
                  <label for="termsAgree" class="required"
                    >I agree to all the terms and conditions mentioned
                    above</label
                  >
                </div>
                <div class="error" id="termsError">
                  You must agree to the terms and conditions
                </div>
              </div>
            </div>

            <!-- Section 7: Emergency Contact -->
            <div class="form-section">
              <h2 class="section-title">
                <i class="fas fa-phone-alt"></i> Emergency Contact
              </h2>

              <div class="form-row">
                <div class="form-group">
                  <label for="emergencyName" class="required">Name</label>
                  <input
                    type="text"
                    id="emergencyName"
                    name="emergencyName"
                    required
                  />
                  <div class="error" id="emergencyNameError">
                    Please enter emergency contact name
                  </div>
                </div>

                <div class="form-group">
                  <label for="emergencyRelation" class="required"
                    >Relationship</label
                  >
                  <input
                    type="text"
                    id="emergencyRelation"
                    name="emergencyRelation"
                    required
                  />
                  <div class="error" id="emergencyRelationError">
                    Please enter relationship
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="emergencyPhone" class="required"
                  >Contact Number</label
                >
                <input
                  type="tel"
                  id="emergencyPhone"
                  name="emergencyPhone"
                  pattern="[0-9]{10}"
                  required
                />
                <div class="error" id="emergencyPhoneError">
                  Please enter a valid 10-digit emergency phone number
                </div>
              </div>
            </div>

            <!-- Section 8: Signature -->
            <div class="form-section">
              <h2 class="section-title">
                <i class="fas fa-signature"></i> Signature
              </h2>

              <div class="form-group">
                <label for="signature" class="required"
                  >Digital Signature</label
                >
                <input
                  type="text"
                  id="signature"
                  name="signature"
                  placeholder="Type your full name as signature"
                  required
                />
                <p style="font-size: 0.9rem; color: #777; margin-top: 5px">
                  By typing your name, you confirm that all information provided
                  is accurate
                </p>
                <div class="error" id="signatureError">
                  Please enter your signature (full name)
                </div>
              </div>
            </div>

            <!-- Submit and Reset Buttons -->
            <div class="btn-container">
              <button type="submit" class="submit-btn" id="submitBtn">
                <i class="fas fa-paper-plane"></i> Submit Booking Request
              </button>
              <button type="reset" class="reset-btn" id="resetBtn">
                <i class="fas fa-redo"></i> Reset Form
              </button>
            </div>
          </form>

          <!-- Success Message -->
          <div class="success-message" id="successMessage">
            <i
              class="fas fa-check-circle"
              style="font-size: 3rem; margin-bottom: 15px"
            ></i>
            <h2>Booking Request Submitted Successfully!</h2>
            <p>
              Thank you for your reservation. We will contact you shortly for
              confirmation.
            </p>
            <p>
              A confirmation email has been sent to your provided email address.
            </p>
            <button
              id="newBookingBtn"
              style="
                margin-top: 20px;
                padding: 10px 20px;
                background: var(--primary);
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
              "
            >
              <i class="fas fa-plus"></i> Make Another Booking
            </button>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <div data-include="components/footer.html"></div>

    <script src="assets/js/include.js"></script>

    <script>
      // DOM Elements
      const form = document.getElementById("bookingForm");
      const roomTypeSelect = document.getElementById("roomType");
      const otherRoomContainer = document.getElementById("otherRoomContainer");
      const paymentMethods = document.querySelectorAll('input[name="payment"]');
      const qrContainer = document.getElementById("qrContainer");
      const submitBtn = document.getElementById("submitBtn");
      const resetBtn = document.getElementById("resetBtn");
      const successMessage = document.getElementById("successMessage");
      const newBookingBtn = document.getElementById("newBookingBtn");
      const notification = document.getElementById("formsubmit-notification");

      // Get current URL to check for success parameter
      const urlParams = new URLSearchParams(window.location.search);
      const success = urlParams.get("success");

      // If form was submitted successfully, show success message
      if (success === "true") {
        form.style.display = "none";
        successMessage.style.display = "block";
      }

      // Show other room type field when "Other" is selected
      roomTypeSelect.addEventListener("change", function () {
        if (this.value === "other") {
          otherRoomContainer.style.display = "block";
          document.getElementById("otherRoom").required = true;
        } else {
          otherRoomContainer.style.display = "none";
          document.getElementById("otherRoom").required = false;
        }
      });

      // Show QR code when UPI payment is selected
      paymentMethods.forEach((method) => {
        method.addEventListener("change", function () {
          if (this.value === "upi") {
            qrContainer.style.display = "block";
          } else {
            qrContainer.style.display = "none";
          }
        });
      });

      paymentMethods.forEach((method) => {
        method.addEventListener("change", function () {
          if (this.value === "upi") {
            qrContainer.style.display = "block";
            txnContainer.style.display = "block";
            document.getElementById("transactionId").required = true;
          } else {
            qrContainer.style.display = "none";
            txnContainer.style.display = "none";
            document.getElementById("transactionId").required = false;
          }
        });
      });

      // Form validation before submission
      form.addEventListener("submit", function (e) {
        // Reset all errors
        const errors = document.querySelectorAll(".error");
        errors.forEach((error) => {
          error.style.display = "none";
        });

        // Clear previous notification
        notification.style.display = "none";
        notification.className = "notification";

        let isValid = true;

        // Validate required fields
        const requiredFields = form.querySelectorAll("[required]");
        requiredFields.forEach((field) => {
          if (!field.value.trim()) {
            const fieldName = field.id || field.name;
            const errorElement = document.getElementById(fieldName + "Error");
            if (errorElement) {
              errorElement.textContent = "This field is required";
              errorElement.style.display = "block";
            }
            isValid = false;
          }
        });

        // Validate email if provided
        const emailField = document.getElementById("emailAddress");
        if (emailField.value && !isValidEmail(emailField.value)) {
          showError("emailError", "Please enter a valid email address");
          isValid = false;
        }

        // Validate phone numbers
        const phoneField = document.getElementById("contactNumber");
        if (phoneField.value && !isValidPhone(phoneField.value)) {
          showError(
            "contactError",
            "Please enter a valid 10-digit phone number"
          );
          isValid = false;
        }

        const emergencyPhoneField = document.getElementById("emergencyPhone");
        if (
          emergencyPhoneField.value &&
          !isValidPhone(emergencyPhoneField.value)
        ) {
          showError(
            "emergencyPhoneError",
            "Please enter a valid 10-digit emergency phone number"
          );
          isValid = false;
        }

        // Validate check-in/check-out dates
        const checkinField = document.getElementById("checkin");
        const checkoutField = document.getElementById("checkout");
        if (checkinField.value && checkoutField.value) {
          const checkinDate = new Date(checkinField.value);
          const checkoutDate = new Date(checkoutField.value);

          if (checkoutDate <= checkinDate) {
            showError("checkoutError", "Check-out must be after check-in");
            isValid = false;
          }
        }

        // If validation fails, prevent form submission
        if (!isValid) {
          e.preventDefault();
          showNotification(
            "error",
            "Please correct the errors in the form before submitting."
          );
          return false;
        }

        // Show loading state
        submitBtn.innerHTML = '<span class="loading"></span> Processing...';
        submitBtn.disabled = true;

        // Add timestamp
        addHiddenField("submissionTime", new Date().toISOString());

        // Form will now submit to FormSubmit
        return true;
      });

      // Reset form button
      resetBtn.addEventListener("click", function () {
        // Clear all error messages
        const errors = document.querySelectorAll(".error");
        errors.forEach((error) => {
          error.style.display = "none";
        });

        // Hide notification
        notification.style.display = "none";

        // Reset other room container
        otherRoomContainer.style.display = "none";

        // Reset QR container
        qrContainer.style.display = "none";

        // Reset button state
        submitBtn.innerHTML =
          '<i class="fas fa-paper-plane"></i> Submit Booking Request';
        submitBtn.disabled = false;
      });

      // New booking button
      newBookingBtn.addEventListener("click", function () {
        successMessage.style.display = "none";
        form.style.display = "block";
        form.reset();

        // Remove success parameter from URL
        const url = new URL(window.location);
        url.searchParams.delete("success");
        window.history.replaceState({}, "", url);
      });

      // Initialize date fields with tomorrow's date as default
      window.addEventListener("DOMContentLoaded", function () {
        const tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);

        const checkinDate = tomorrow.toISOString().slice(0, 16);
        const checkoutDate = new Date(tomorrow);
        checkoutDate.setDate(checkoutDate.getDate() + 1);
        const checkoutDateStr = checkoutDate.toISOString().slice(0, 16);

        document.getElementById("checkin").value = checkinDate;
        document.getElementById("checkout").value = checkoutDateStr;

        // If coming back from success, show success message
        if (window.location.hash === "#success") {
          form.style.display = "none";
          successMessage.style.display = "block";
        }
      });

      // Helper functions
      function showError(errorId, message) {
        const errorElement = document.getElementById(errorId);
        if (errorElement) {
          errorElement.textContent = message;
          errorElement.style.display = "block";
        }
      }

      function showNotification(type, message) {
        notification.textContent = message;
        notification.className = `notification ${type}`;
        notification.style.display = "block";

        // Scroll to notification
        notification.scrollIntoView({ behavior: "smooth", block: "center" });
      }

      function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }

      function isValidPhone(phone) {
        const phoneRegex = /^[0-9]{10}$/;
        return phoneRegex.test(phone);
      }

      function generateBookingReference() {
        const date = new Date();
        const year = date.getFullYear().toString().substr(-2);
        const month = (date.getMonth() + 1).toString().padStart(2, "0");
        const day = date.getDate().toString().padStart(2, "0");
        const random = Math.floor(Math.random() * 10000)
          .toString()
          .padStart(4, "0");
        return `GH${year}${month}${day}${random}`;
      }

      function addHiddenField(name, value) {
        // Check if field already exists
        let field = document.querySelector(`input[name="${name}"]`);
        if (!field) {
          field = document.createElement("input");
          field.type = "hidden";
          field.name = name;
          form.appendChild(field);
        }
        field.value = value;
      }
    </script>
  </body>
</html>
